git clone https://github.com/b06608062/osc2024.git
git branch
git fetch
git branch -r
git checkout --track origin/A122573
touch .gitignore
git add .
git commit -m "test"
git push origin A122573

### install arm-gnu-toolchain-13.2.rel1-darwin-arm64-aarch64-none-elf.pkg from https://developer.arm.com/downloads/-/arm-gnu-toolchain-downloads
### /System/Volumes/Data/Applications/ArmGNUToolchain/13.2.Rel1/aarch64-none-elf/bin/aarch64-none-elf-gcc
nano ~/.zshrc
export PATH="/System/Volumes/Data/Applications/ArmGNUToolchain/13.2.Rel1/aarch64-none-elf/bin:$PATH"
source ~/.zshrc
aarch64-none-elf-gcc --version

brew install qemu
qemu-system-aarch64 -version

touch a.S
vim a.s

.section ".text"
_start:
  wfe
  b _start

aarch64-none-elf-gcc -c a.S -o a.o
aarch64-none-elf-gcc -g -c a.S -o a.o

touch linker.ld
nano linker.ld

SECTIONS
{
  . = 0x80000;
  .text : { *(.text) }
}

aarch64-none-elf-ld -T linker.ld -o kernel8.elf a.o

aarch64-none-elf-objcopy -O binary kernel8.elf kernel8.img

qemu-system-aarch64 -M raspi3b -kernel kernel8.img -display none -d in_asm
qemu-system-aarch64 -M raspi3b -serial null -serial stdio -display none -kernel kernel8.img

### download bootable image
diskutil list
sudo diskutil unmount /dev/disk4s1
sudo diskutil unmount /dev/disk4s2
sudo dd if=nycuos.img of=/dev/disk4 bs=4M

sudo diskutil mount /dev/disk4s1
ls /Volumes/NO\ NAME
sudo diskutil unmount /dev/disk4s1
sudo diskutil unmountDisk /dev/disk4

cp ./kernel8.img /Volumes/NO\ NAME/kernel8.img
diskutil unmount /Volumes/NO\ NAME

ls /dev/cu.*
screen /dev/cu.SLAB_USBtoUART 115200

qemu-system-aarch64 -M raspi3b -kernel kernel8.img -display none -S -s
aarch64-none-elf-gdb --version
aarch64-none-elf-gdb kernel8.elf
target remote localhost:1234

break main
info variables
x/32xb &__bss_start
info registers
info registers sp
info register pc